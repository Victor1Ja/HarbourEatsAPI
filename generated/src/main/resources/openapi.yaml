openapi: 3.0.0
info:
  description: API documentation for managing quests and tracking progress in HarbourEats.
  title: HarbourEats Quests API
  version: 1.0.0
servers:
- url: /
paths:
  /admin/quests:
    get:
      description: Retrieve a list of all quests.
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Quest'
                type: array
          description: A list of quests
      summary: Get all quests
      tags:
      - Admin
    post:
      description: Create and launch a new quest.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuestInput'
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Quest'
          description: Successfully created
      summary: Create a new quest
      tags:
      - Admin
  /admin/quests/{id}:
    delete:
      description: Delete a specific quest by its ID.
      parameters:
      - description: ID of the quest to delete
        explode: false
        in: path
        name: id
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "204":
          description: Successfully deleted
      summary: Delete quest by ID
      tags:
      - Admin
    get:
      description: Retrieve details of a specific quest by its ID.
      parameters:
      - description: ID of the quest to retrieve
        explode: false
        in: path
        name: id
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Quest'
          description: Details of the quest
      summary: Get quest by ID
      tags:
      - Admin
    put:
      description: Update details of a specific quest by its ID.
      parameters:
      - description: ID of the quest to update
        explode: false
        in: path
        name: id
        required: true
        schema:
          type: integer
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuestInput'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Quest'
          description: Successfully updated
      summary: Update quest by ID
      tags:
      - Admin
  /admin/quests/{quest_id}/tiers:
    get:
      description: Retrieve all tiers associated with a specific quest.
      parameters:
      - description: ID of the quest
        explode: false
        in: path
        name: quest_id
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/QuestTier'
                type: array
          description: A list of tiers
      summary: Get all tiers of a quest
      tags:
      - Admin
    post:
      description: Create a new tier for a specific quest.
      parameters:
      - description: ID of the quest
        explode: false
        in: path
        name: quest_id
        required: true
        schema:
          type: integer
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TierInput'
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuestTier'
          description: Successfully created
      summary: Create a new tier for a quest
      tags:
      - Admin
  /admin/quests/{quest_id}/tiers/{tier_id}:
    delete:
      description: Delete a specific tier by its ID.
      parameters:
      - description: ID of the quest
        explode: false
        in: path
        name: quest_id
        required: true
        schema:
          type: integer
        style: simple
      - description: ID of the tier
        explode: false
        in: path
        name: tier_id
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "204":
          description: Successfully deleted
      summary: Delete tier by ID
      tags:
      - Admin
    get:
      description: Retrieve details of a specific tier by its ID.
      parameters:
      - description: ID of the quest
        explode: false
        in: path
        name: quest_id
        required: true
        schema:
          type: integer
        style: simple
      - description: ID of the tier
        explode: false
        in: path
        name: tier_id
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuestTier'
          description: Details of the tier
      summary: Get tier by ID
      tags:
      - Admin
    put:
      description: Update details of a specific tier by its ID.
      parameters:
      - description: ID of the quest
        explode: false
        in: path
        name: quest_id
        required: true
        schema:
          type: integer
        style: simple
      - description: ID of the tier
        explode: false
        in: path
        name: tier_id
        required: true
        schema:
          type: integer
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TierInput'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuestTier'
          description: Successfully updated
      summary: Update tier by ID
      tags:
      - Admin
  /courier/{courier_id}/quests:
    get:
      description: Retrieve all quests assigned to the courier.
      parameters:
      - description: ID of the courier
        explode: false
        in: path
        name: courier_id
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Quest'
                type: array
          description: The progress of the courier for each active quest
      summary: Get courier's quests
      tags:
      - Courier
  /courier/{courier_id}/quests/{quest_id}/progress:
    get:
      description: Retrieve the progress of a specific quest for the courier.
      parameters:
      - description: ID of the quest
        explode: false
        in: path
        name: quest_id
        required: true
        schema:
          type: integer
        style: simple
      - description: ID of the courier
        explode: false
        in: path
        name: courier_id
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CourierQuestProgress'
          description: Courier's quest progress
      summary: Get quest progress for a courier
      tags:
      - Courier
  /courier/{courier_id}/quests/{quest_id}/history:
    get:
      description: The progress of the courier for each quest they have participated
        in.
      parameters:
      - description: ID of the quest
        explode: false
        in: path
        name: quest_id
        required: true
        schema:
          type: integer
        style: simple
      - description: ID of the courier
        explode: false
        in: path
        name: courier_id
        required: true
        schema:
          type: integer
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/CourierQuestProgress'
                type: array
          description: Courier's quest participation history
      summary: Get courier's quest participation history
      tags:
      - Courier
  /courier/rewards:
    post:
      description: Claim rewards earned by the courier.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RewardClaimInput'
        required: true
      responses:
        "200":
          description: Rewards claimed successfully
      summary: Claim rewards
      tags:
      - Courier
  /system/orders:
    post:
      description: Update the progress of the courier for completed orders.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourierProgressUpdateInput'
        required: true
      responses:
        "200":
          description: Courier's quest progress updated successfully
      summary: Update courier quest progress
      tags:
      - System
components:
  schemas:
    QuestInput:
      example:
        duration: 0
        name: name
        created_at: 2000-01-23T04:56:07.000+00:00
      properties:
        name:
          description: Name of the quest
          nullable: false
          type: string
        duration:
          description: Duration of the quest in days
          nullable: false
          type: integer
        created_at:
          description: Date when the quest was created
          format: date-time
          nullable: false
          type: string
      type: object
    TierInput:
      example:
        reward: 1
        order_goal: 6
        tier_number: 0
      properties:
        tier_number:
          description: Number representing the tier level
          nullable: false
          type: integer
        order_goal:
          description: Number of orders required to achieve this tier
          nullable: false
          type: integer
        reward:
          description: Reward associated with achieving this tier
          nullable: false
          type: integer
      type: object
    RewardClaimInput:
      example:
        courier_id: 0
        tier_number: 1
        quest_id: 6
      properties:
        courier_id:
          description: ID of the courier claiming the reward
          nullable: false
          type: integer
        quest_id:
          description: ID of the quest for which the reward is being claimed
          nullable: false
          type: integer
        tier_number:
          description: Number representing the tier level for which the reward is
            being claimed
          nullable: false
          type: integer
      type: object
    CourierProgressUpdateInput:
      example:
        courier_id: 0
        orders_delivered: 6
      properties:
        courier_id:
          description: ID of the courier
          nullable: false
          type: integer
        orders_delivered:
          description: Number of orders delivered by the courier
          nullable: false
          type: integer
      type: object
    Quest:
      example:
        duration: 6
        name: name
        id: 0
      properties:
        id:
          description: Unique identifier for the quest
          nullable: false
          type: integer
        name:
          description: Name of the quest
          nullable: false
          type: string
        duration:
          description: Duration of the quest in days
          nullable: false
          type: integer
      type: object
    QuestTier:
      example:
        reward: 5
        order_goal: 5
        tier_number: 1
        quest_id: 6
        id: 0
      properties:
        id:
          description: Unique identifier for the quest tier
          nullable: false
          type: integer
        quest_id:
          description: ID of the quest to which this tier belongs
          type: integer
        tier_number:
          description: Number representing the tier level
          nullable: false
          type: integer
        order_goal:
          description: Number of orders required to achieve this tier
          nullable: false
          type: integer
        reward:
          description: Reward associated with achieving this tier
          nullable: false
          type: integer
      type: object
    CourierQuestProgress:
      example:
        current_tier: 1
        courier_id: 0
        quest_id: 6
        orders_delivered: 5
      properties:
        courier_id:
          description: ID of the courier
          nullable: false
          type: integer
        quest_id:
          description: ID of the quest
          nullable: false
          type: integer
        current_tier:
          description: Number representing the current tier the courier is at
          nullable: false
          type: integer
        orders_delivered:
          description: Number of orders delivered by the courier for this quest
          nullable: false
          type: integer
      type: object
